<?php
/**
 * Generated by Haxe 4.0.0-rc.2+77068e10c
 */

use \php\Boot;
use \php\_Boot\HxString;

/**
 * This class provides advanced methods on Strings. It is ideally used with
 * `using StringTools` and then acts as an [extension](https://haxe.org/manual/lf-static-extension.html)
 * to the `String` class.
 * If the first argument to any of the methods is null, the result is
 * unspecified.
 */
class StringTools {
	/**
	 * @var \Array_hx
	 * Character codes of the characters that will be escaped by `quoteWinArg(_, true)`.
	 */
	static public $winMetaCharacters;

	/**
	 * Returns a String that can be used as a single command line argument
	 * on Unix.
	 * The input will be quoted, or escaped if necessary.
	 * 
	 * @param string $argument
	 * 
	 * @return string
	 */
	static public function quoteUnixArg ($argument) {
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:132: lines 132-133
		if ($argument === "") {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:133: characters 4-15
			return "''";
		}
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:135: lines 135-136
		if (!(new \EReg("[^a-zA-Z0-9_@%+=:,./-]", ""))->match($argument)) {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:136: characters 4-19
			return $argument;
		}
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:140: characters 3-55
		return "'" . (StringTools::replace($argument, "'", "'\"'\"'")??'null') . "'";
	}

	/**
	 * Returns a String that can be used as a single command line argument
	 * on Windows.
	 * The input will be quoted, or escaped if necessary, such that the output
	 * will be parsed as a single argument using the rule specified in
	 * http://msdn.microsoft.com/en-us/library/ms880421
	 * Examples:
	 * ```haxe
	 * quoteWinArg("abc") == "abc";
	 * quoteWinArg("ab c") == '"ab c"';
	 * ```
	 * 
	 * @param string $argument
	 * @param bool $escapeMetaCharacters
	 * 
	 * @return string
	 */
	static public function quoteWinArg ($argument, $escapeMetaCharacters) {
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:163: lines 163-206
		if (!(new \EReg("^[^ \x09\\\\\"]+\$", ""))->match($argument)) {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:168: characters 4-33
			$result = new \StringBuf();
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:169: characters 4-98
			$needquote = (HxString::indexOf($argument, " ") !== -1) || (HxString::indexOf($argument, "\x09") !== -1) || ($argument === "");
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:171: lines 171-172
			if ($needquote) {
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:172: characters 5-20
				$result->add("\"");
			}
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:174: characters 4-33
			$bs_buf = new \StringBuf();
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:175: lines 175-195
			$_g = 0;
			$_g1 = mb_strlen($argument);
			while ($_g < $_g1) {
				$i = $_g++;
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:176: characters 13-35
				$_g2 = HxString::charCodeAt($argument, $i);
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:176: lines 176-193
				if ($_g2 === null) {
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:187: characters 11-16
					$c = $_g2;
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:189: lines 189-192
					if (mb_strlen($bs_buf->b) > 0) {
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:190: characters 8-37
						$result->add($bs_buf->b);
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:191: characters 8-32
						$bs_buf = new \StringBuf();
					}
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:193: characters 7-13
					$result1 = $result;
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:193: characters 7-24
					$result1->b = ($result1->b??'null') . (mb_chr($c)??'null');

				} else {
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:176: characters 13-35
					if ($_g2 === 34) {
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:182: characters 7-34
						$bs = $bs_buf->b;
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:183: characters 7-21
						$result->add($bs);
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:184: characters 7-21
						$result->add($bs);
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:185: characters 7-31
						$bs_buf = new \StringBuf();
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:186: characters 7-24
						$result->add("\\\"");
					} else if ($_g2 === 92) {
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:179: characters 7-23
						$bs_buf->add("\\");
					} else {
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:187: characters 11-16
						$c1 = $_g2;
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:189: lines 189-192
						if (mb_strlen($bs_buf->b) > 0) {
							#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:190: characters 8-37
							$result->add($bs_buf->b);
							#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:191: characters 8-32
							$bs_buf = new \StringBuf();
						}
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:193: characters 7-13
						$result2 = $result;
						#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:193: characters 7-24
						$result2->b = ($result2->b??'null') . (mb_chr($c1)??'null');

					}
				}

			}

			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:198: characters 4-33
			$result->add($bs_buf->b);
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:200: lines 200-203
			if ($needquote) {
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:201: characters 5-34
				$result->add($bs_buf->b);
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:202: characters 5-20
				$result->add("\"");
			}
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:205: characters 4-32
			$argument = $result->b;
		}
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:208: lines 208-220
		if ($escapeMetaCharacters) {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:209: characters 4-33
			$result3 = new \StringBuf();
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:210: lines 210-216
			$_g3 = 0;
			$_g11 = mb_strlen($argument);
			while ($_g3 < $_g11) {
				$i1 = $_g3++;
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:211: characters 5-36
				$c2 = HxString::charCodeAt($argument, $i1);
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:212: lines 212-214
				if (StringTools::$winMetaCharacters->indexOf($c2) >= 0) {
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:213: characters 6-12
					$result4 = $result3;
					#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:213: characters 6-30
					$result4->b = ($result4->b??'null') . (mb_chr(94)??'null');
				}
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:215: characters 5-11
				$result5 = $result3;
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:215: characters 5-22
				$result5->b = ($result5->b??'null') . (mb_chr($c2)??'null');
			}

			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:217: characters 4-28
			return $result3->b;
		} else {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:219: characters 4-19
			return $argument;
		}
	}

	/**
	 * Replace all occurrences of the String `sub` in the String `s` by the
	 * String `by`.
	 * If `sub` is the empty String `""`, `by` is inserted after each character
	 * of `s` except the last one. If `by` is also the empty String `""`, `s`
	 * remains unchanged.
	 * If `sub` or `by` are null, the result is unspecified.
	 * 
	 * @param string $s
	 * @param string $sub
	 * @param string $by
	 * 
	 * @return string
	 */
	static public function replace ($s, $sub, $by) {
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:97: lines 97-99
		if ($sub === "") {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:98: characters 4-89
			return implode($by, preg_split("//u", $s, -1, PREG_SPLIT_NO_EMPTY));
		}
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:100: characters 3-40
		return str_replace($sub, $by, $s);
	}

	/**
	 * Appends `c` to `s` until `s.length` is at least `l`.
	 * If `c` is the empty String `""` or if `l` does not exceed `s.length`,
	 * `s` is returned unchanged.
	 * If `c.length` is 1, the resulting String length is exactly `l`.
	 * Otherwise the length may exceed `l`.
	 * If `c` is null, the result is unspecified.
	 * 
	 * @param string $s
	 * @param string $c
	 * @param int $l
	 * 
	 * @return string
	 */
	static public function rpad ($s, $c, $l) {
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:69: characters 3-26
		$cLength = mb_strlen($c);
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:70: characters 3-26
		$sLength = mb_strlen($s);
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:71: characters 3-45
		if (($cLength === 0) || ($sLength >= $l)) {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:71: characters 37-45
			return $s;
		}
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:72: characters 3-31
		$padLength = $l - $sLength;
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:73: characters 3-50
		$padCount = (int)(($padLength / $cLength));
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:74: lines 74-79
		if ($padCount > 0) {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:75: characters 4-107
			$result = str_pad($s, strlen($s) + $padCount * strlen($c), $c, STR_PAD_RIGHT);
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:76: characters 11-80
			if (($padCount * $cLength) >= $padLength) {
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:76: characters 47-53
				return $result;
			} else {
				#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:76: characters 56-80
				return ($result . $c);
			}
		} else {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:78: characters 4-30
			return ($s . $c);
		}
	}

	/**
	 * Tells if the string `s` starts with the string `start`.
	 * If `start` is `null`, the result is unspecified.
	 * If `start` is the empty String `""`, the result is true.
	 * 
	 * @param string $s
	 * @param string $start
	 * 
	 * @return bool
	 */
	static public function startsWith ($s, $start) {
		#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:44: characters 10-53
		if ($start !== "") {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:44: characters 25-53
			return Boot::equal(strpos($s, $start), 0);
		} else {
			#C:\MyProg\_tools\motion-twin\haxe\std/php/_std/StringTools.hx:44: characters 10-53
			return true;
		}
	}

	/**
	 * @internal
	 * @access private
	 */
	static public function __hx__init ()
	{
		static $called = false;
		if ($called) return;
		$called = true;


		self::$winMetaCharacters = \Array_hx::wrap([
			59,
			44,
			32,
			40,
			41,
			37,
			33,
			94,
			34,
			60,
			62,
			38,
			124,
			10,
			13,
		]);
	}
}

Boot::registerClass(StringTools::class, 'StringTools');
StringTools::__hx__init();
